{% extends 'base.html' %}

{% block content %}

<section id="dashboard">
  <div class="container-fluid mt-4">

    <!--Orderstatus-->
    <div class="row">
      <div class="col custom-card text-center p-3 m-3">
        <h6>Order ID</h6>
        {% if order.id_code %}
          <h5>{{ order.id_code }}</h5>
        {% else %}
          <h5>In cart</h5>
        {% endif %}
      </div>
      <div class="col custom-card text-center p-3 m-3">
        <h6>Date</h6>
        <h5>{{ order.date }}</h5>
      </div>
      <div class="col custom-card text-center p-3 m-3">
        <h6>Status</h6>
        <h5>{{ order.status }}</h5>
      </div>
    </div>
    <!--Orderstatus end-->

    <div class="row mt-3">
      <div class="col-12">
        <h6 class="text-uppercase pl-2">order details</h6>
        <hr class="dashboard m-0">

        <!--Orderdetails-->
        <div class="custom-card mt-3">
          <table class="nowrap table table-sm height-fix">
            <thead>
              <tr>
                <th>Services</th>
                <th class="cart-align-right">Price</th>
              </tr>
            </thead>
            <tbody>
              {% for order_item in order.items.all %}
                <tr>
                  <td>{{ forloop.counter }}. {{ order_item.item.name }}</td>
                  <td class="cart-align-right">{{ order_item.item.price }}€</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <!--Orderdetails end-->

        <!--Order costs-->
        <div class="custom-card my-4">
          <table class="nowrap table table-sm height-fix">
            <thead>
              <tr>
                <th>Additional costs</th>
                <th> </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Tax 21 %</td>
                {% if order.tax %}
                  <td class="cart-align-right">{{ order.tax|floatformat:2 }}€</td>
                {% else %}
                  <td class="cart-align-right">{{ tax|floatformat:2 }}€</td>
                {% endif %}
              </tr>
              <tr>
                <td class="font-weight-bold">Total</td>
                {% if order.tax %}
                  <td class="cart-align-right font-weight-bold"><strong>{{ order.total|floatformat:2 }}€</strong></td>
                {% else %}
                  <td class="cart-align-right font-weight-bold"><strong>{{ total|floatformat:2 }}€</strong></td>
                {% endif %}
              </tr>
              <tr>
                <td class="pt-5"><a href="{% url 'accounts:customerpage' %}" class="btn btn-black-sm">Return to overview</a></td>
                {% if order.id_code %}
                  <td class="pt-5"><a href="{{ order.artwork.url }}" target="_blank" class="btn btn-black-sm">Download artwork</a></td>
                {% else %}
                  {% if request.user.is_superuser %}
                    <td class="pt-5"><button disabled class="btn btn-gray-sm">Artwork not available</button></td>
                  {% else %}
                    <td class="pt-5"><a href="{% url 'orders:checkout' %}" class="btn btn-black-sm" role="button">Checkout</a></td>
                  {% endif %}
                {% endif %}
              <tr>
            </tbody>
          </table>
        </div>
        <!--Order costs end-->
        
      </div>
    </div>
  </div>
</section>

{% endblock content %}